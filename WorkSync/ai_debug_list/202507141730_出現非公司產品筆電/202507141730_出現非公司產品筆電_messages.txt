frontend messages

mgfd_cursor:611 🔧 renderAssistantMessage called with: {contentType: 'string', contentValue: '會話創建成功', dataType: 'object', dataKeys: null}
mgfd_cursor:654 📄 Processing plain text response
content_script.js:6998 Immersive Translate INFO: 全局时间戳一致，检查单个术语库更新
content_script.js:6998 Immersive Translate INFO: 开始下载 1 个术语库...
content_script.js:6998 Immersive Translate INFO: 本地同步时间戳无需更新 (2025/7/17 下午9:55:46)
mgfd_cursor:540 🔄 Received data from backend: {success: true, response: '🔥 **目前最受歡迎的筆電推薦** 🔥\n\n根據銷量、用戶評價和市場熱度，我為您推薦以下熱門選擇：…上最受歡迎的筆電，性價比高且用戶評價良好。您對哪一款比較感興趣？我可以為您提供更詳細的規格和比較。', session_id: '74bdcd24-9f50-4143-bf87-a394b53255ac', timestamp: '2025-08-14T17:28:07.775212', action_type: 'recommend_popular_products', …}
mgfd_cursor:554 📦 Detected standard response format
mgfd_cursor:611 🔧 renderAssistantMessage called with: {contentType: 'string', contentValue: '🔥 **目前最受歡迎的筆電推薦** 🔥\n\n根據銷量、用戶評價和市場熱度，我為您推薦以下熱門選擇：…上最受歡迎的筆電，性價比高且用戶評價良好。您對哪一款比較感興趣？我可以為您提供更詳細的規格和比較。', dataType: 'object', dataKeys: Array(9)}
mgfd_cursor:654 📄 Processing plain text response
mgfd_cursor:540 🔄 Received data from backend: {success: true, response: '{\n  "type": "funnel_question",\n  "session_id": "",…to_scroll": true,\n  "button_type": "suggestion"\n}', session_id: '74bdcd24-9f50-4143-bf87-a394b53255ac', timestamp: '2025-08-14T17:28:59.532158', action_type: 'elicit_information', …}
mgfd_cursor:554 📦 Detected standard response format
mgfd_cursor:611 🔧 renderAssistantMessage called with: {contentType: 'string', contentValue: '{\n  "type": "funnel_question",\n  "session_id": "",…to_scroll": true,\n  "button_type": "suggestion"\n}', dataType: 'object', dataKeys: Array(9)}
mgfd_cursor:637 📝 Parsed JSON content: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:646 🎯 Processing structured content: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:660 🎯 renderStructuredResponse called with: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:690 🔥 Rendering funnel question: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:730 ✅ Funnel question validation passed
mgfd_cursor:887 🎯 Funnel option clicked: {optionId: 'gaming', sessionId: ''}
mgfd_cursor:611 🔧 renderAssistantMessage called with: {contentType: 'string', contentValue: '{\n  "type": "funnel_question",\n  "session_id": "",…to_scroll": true,\n  "button_type": "suggestion"\n}', dataType: 'object', dataKeys: Array(9)}
mgfd_cursor:637 📝 Parsed JSON content: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:646 🎯 Processing structured content: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:660 🎯 renderStructuredResponse called with: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:690 🔥 Rendering funnel question: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:730 ✅ Funnel question validation passed
mgfd_cursor:887 🎯 Funnel option clicked: {optionId: 'gaming', sessionId: ''}
mgfd_cursor:611 🔧 renderAssistantMessage called with: {contentType: 'string', contentValue: '{\n  "type": "funnel_question",\n  "session_id": "",…to_scroll": true,\n  "button_type": "suggestion"\n}', dataType: 'object', dataKeys: Array(9)}
mgfd_cursor:637 📝 Parsed JSON content: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:646 🎯 Processing structured content: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:660 🎯 renderStructuredResponse called with: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:690 🔥 Rendering funnel question: {type: 'funnel_question', session_id: '', question: {…}, context: {…}, message: '請選擇最符合您需求的選項，我將為您提供更精準的協助。', …}
mgfd_cursor:730 ✅ Funnel question validation passed


backend messages:
INFO:     127.0.0.1:57830 - "GET /mgfd_cursor HTTP/1.1" 200 OK
INFO:     127.0.0.1:57830 - "GET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1" 404 Not Found
2025-08-14 17:28:03,219 - api.mgfd_routes - INFO - 創建新會話: 74bdcd24-9f50-4143-bf87-a394b53255ac
2025-08-14 17:28:03,219 - libs.mgfd_cursor.redis_state_manager - INFO - 刪除會話: 74bdcd24-9f50-4143-bf87-a394b53255ac
INFO:     127.0.0.1:57830 - "POST /api/mgfd_cursor/session/create HTTP/1.1" 200 OK
2025-08-14 17:28:03,253 - api.mgfd_routes - INFO - 獲取系統統計資訊
2025-08-14 17:28:03,254 - libs.mgfd_cursor.redis_state_manager - ERROR - 清理過期會話失敗: 'str' object has no attribute 'decode'
INFO:     127.0.0.1:57830 - "GET /api/mgfd_cursor/stats HTTP/1.1" 200 OK
2025-08-14 17:28:07,650 - api.mgfd_routes - INFO - 處理聊天請求 - 會話ID: 74bdcd24-9f50-4143-bf87-a394b53255ac, 消息: 請幫我介紹目前比較多人選擇的筆電...
2025-08-14 17:28:07,650 - libs.mgfd_cursor.mgfd_system - INFO - 處理會話 74bdcd24-9f50-4143-bf87-a394b53255ac 的消息: 請幫我介紹目前比較多人選擇的筆電...
2025-08-14 17:28:07,651 - libs.mgfd_cursor.enhanced_slot_extractor - INFO - 增強型槽位提取，輸入: 請幫我介紹目前比較多人選擇的筆電...
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 42.08it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 57.39it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 40.33it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 54.24it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 77.96it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 81.27it/s]
2025-08-14 17:28:07,774 - libs.mgfd_cursor.enhanced_slot_extractor - INFO - 找到特殊案例匹配: DSL003
2025-08-14 17:28:07,774 - libs.mgfd_cursor.user_input_handler - INFO - 槽位提取結果: {'extracted_slots': {'usage_purpose': 'general', 'budget_range': 'mid_range', 'popularity_focus': True}, 'special_case': {'type': 'special_case_response', 'case_id': 'DSL003', 'matched_category': 'difficult_slot_detection', 'similarity_score': 0.9589197099208832, 'message': '我了解您想要了解熱門筆電！讓我為您推薦目前最受歡迎的選擇：', 'response_type': 'popular_recommendation', 'confidence': 0.95, 'timestamp': '2025-08-14T17:28:07.774108', 'inferred_slots': {'usage_purpose': 'general', 'budget_range': 'mid_range', 'popularity_focus': True}}, 'extraction_method': 'special_case_knowledge'}
2025-08-14 17:28:07,774 - libs.mgfd_cursor.redis_state_manager - INFO - 保存會話狀態: 74bdcd24-9f50-4143-bf87-a394b53255ac
2025-08-14 17:28:07,774 - libs.mgfd_cursor.response_generator - INFO - 生成回應: popular_recommendation
2025-08-14 17:28:07,775 - libs.mgfd_cursor.redis_state_manager - INFO - 保存會話狀態: 74bdcd24-9f50-4143-bf87-a394b53255ac
2025-08-14 17:28:07,775 - libs.mgfd_cursor.mgfd_system - INFO - 會話 74bdcd24-9f50-4143-bf87-a394b53255ac 處理完成，動作類型: recommend_popular_products
INFO:     127.0.0.1:57830 - "POST /api/mgfd_cursor/chat HTTP/1.1" 200 OK
2025-08-14 17:28:07,849 - watchfiles.main - INFO - 1 change detected
2025-08-14 17:28:59,421 - api.mgfd_routes - INFO - 處理聊天請求 - 會話ID: 74bdcd24-9f50-4143-bf87-a394b53255ac, 消息: Lenovo ThinkPad X1 Carbon...
2025-08-14 17:28:59,421 - libs.mgfd_cursor.mgfd_system - INFO - 處理會話 74bdcd24-9f50-4143-bf87-a394b53255ac 的消息: Lenovo ThinkPad X1 Carbon...
2025-08-14 17:28:59,421 - libs.mgfd_cursor.redis_state_manager - INFO - 載入會話狀態: 74bdcd24-9f50-4143-bf87-a394b53255ac
2025-08-14 17:28:59,421 - libs.mgfd_cursor.enhanced_slot_extractor - INFO - 增強型槽位提取，輸入: Lenovo ThinkPad X1 Carbon...
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 60.66it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 71.67it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 48.93it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 56.62it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 62.95it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 81.15it/s]
2025-08-14 17:28:59,530 - libs.mgfd_cursor.enhanced_slot_extractor - INFO - 槽位提取結果: {'timestamp': '2025-08-14T17:28:59.530974', 'user_input': 'Lenovo ThinkPad X1 Carbon', 'extracted_slots': {'brand_preference': 'lenovo'}, 'extraction_method': 'enhanced'}
2025-08-14 17:28:59,531 - libs.mgfd_cursor.user_input_handler - INFO - 槽位提取結果: {'extracted_slots': {'brand_preference': 'lenovo'}, 'extraction_method': 'enhanced_extraction'}
2025-08-14 17:28:59,531 - libs.mgfd_cursor.redis_state_manager - INFO - 保存會話狀態: 74bdcd24-9f50-4143-bf87-a394b53255ac
2025-08-14 17:28:59,531 - libs.mgfd_cursor.llm_manager - INFO - Act階段結果: 這是一個模擬的 LLM 回應。
2025-08-14 17:28:59,531 - libs.mgfd_cursor.response_generator - INFO - 生成回應: elicitation
2025-08-14 17:28:59,532 - libs.mgfd_cursor.redis_state_manager - INFO - 保存會話狀態: 74bdcd24-9f50-4143-bf87-a394b53255ac
2025-08-14 17:28:59,532 - libs.mgfd_cursor.mgfd_system - INFO - 會話 74bdcd24-9f50-4143-bf87-a394b53255ac 處理完成，動作類型: elicit_information
INFO:     127.0.0.1:57832 - "POST /api/mgfd_cursor/chat HTTP/1.1" 200 OK
2025-08-14 17:29:02,749 - api.mgfd_routes - INFO - 處理聊天請求 - 會話ID: 1d47120b-288d-40e3-963e-0db006b073ed, 消息: 選擇選項: gaming...
2025-08-14 17:29:02,749 - libs.mgfd_cursor.mgfd_system - INFO - 處理會話 1d47120b-288d-40e3-963e-0db006b073ed 的消息: 選擇選項: gaming...
2025-08-14 17:29:02,749 - libs.mgfd_cursor.enhanced_slot_extractor - INFO - 增強型槽位提取，輸入: 選擇選項: gaming...
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 61.67it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 79.04it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 51.58it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 66.36it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 87.40it/s]
Batches: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00, 75.33it/s]
2025-08-14 17:29:02,850 - libs.mgfd_cursor.enhanced_slot_extractor - INFO - 槽位提取結果: {'timestamp': '2025-08-14T17:29:02.850466', 'user_input': '選擇選項: gaming', 'extracted_slots': {'usage_purpose': 'gaming'}, 'extraction_method': 'enhanced'}
2025-08-14 17:29:02,850 - libs.mgfd_cursor.user_input_handler - INFO - 槽位提取結果: {'extracted_slots': {'usage_purpose': 'gaming'}, 'extraction_method': 'enhanced_extraction'}
2025-08-14 17:29:02,851 - libs.mgfd_cursor.redis_state_manager - INFO - 保存會話狀態: 1d47120b-288d-40e3-963e-0db006b073ed
2025-08-14 17:29:02,851 - libs.mgfd_cursor.llm_manager - INFO - Act階段結果: 這是一個模擬的 LLM 回應。
2025-08-14 17:29:02,851 - libs.mgfd_cursor.response_generator - INFO - 生成回應: elicitation
2025-08-14 17:29:02,851 - libs.mgfd_cursor.redis_state_manager - INFO - 保存會話狀態: 1d47120b-288d-40e3-963e-0db006b073ed
2025-08-14 17:29:02,851 - libs.mgfd_cursor.mgfd_system - INFO - 會話 1d47120b-288d-40e3-963e-0db006b073ed 處理完成，動作類型: elicit_information
INFO:     127.0.0.1:57832 - "POST /api/mgfd_cursor/chat HTTP/1.1" 200 OK
2025-08-14 17:29:09,231 - api.mgfd_routes - INFO - 處理聊天請求 - 會話ID: 8260f6c5-4588-422b-9bd5-17cb8b042877, 消息: 選擇選項: gaming...
2025-08-14 17:29:09,231 - libs.mgfd_cursor.mgfd_system - INFO - 處理會話 8260f6c5-4588-422b-9bd5-17cb8b042877 的消息: 選擇選項: gaming...
2025-08-14 17:29:09,231 - libs.mgfd_cursor.enhanced_slot_extractor - INFO - 增強型槽位提取，輸入: 選擇選項: gaming...
2025-08-14 17:29:09,231 - libs.mgfd_cursor.enhanced_slot_extractor - INFO - 槽位提取結果: {'timestamp': '2025-08-14T17:29:09.231560', 'user_input': '選擇選項: gaming', 'extracted_slots': {'usage_purpose': 'gaming'}, 'extraction_method': 'enhanced'}
2025-08-14 17:29:09,231 - libs.mgfd_cursor.user_input_handler - INFO - 槽位提取結果: {'extracted_slots': {'usage_purpose': 'gaming'}, 'extraction_method': 'enhanced_extraction'}
2025-08-14 17:29:09,231 - libs.mgfd_cursor.redis_state_manager - INFO - 保存會話狀態: 8260f6c5-4588-422b-9bd5-17cb8b042877
2025-08-14 17:29:09,232 - libs.mgfd_cursor.llm_manager - INFO - Act階段結果: 這是一個模擬的 LLM 回應。
2025-08-14 17:29:09,232 - libs.mgfd_cursor.response_generator - INFO - 生成回應: elicitation
2025-08-14 17:29:09,232 - libs.mgfd_cursor.redis_state_manager - INFO - 保存會話狀態: 8260f6c5-4588-422b-9bd5-17cb8b042877
2025-08-14 17:29:09,232 - libs.mgfd_cursor.mgfd_system - INFO - 會話 8260f6c5-4588-422b-9bd5-17cb8b042877 處理完成，動作類型: elicit_information
INFO:     127.0.0.1:55434 - "POST /api/mgfd_cursor/chat HTTP/1.1" 200 OK
2025-08-14 17:29:10,907 - watchfiles.main - INFO - 1 change detected
2025-08-14 17:30:45,350 - watchfiles.main - INFO - 1 change detected
2025-08-14 17:30:53,519 - watchfiles.main - INFO - 1 change detected
2025-08-14 17:32:21,637 - watchfiles.main - INFO - 1 change detected