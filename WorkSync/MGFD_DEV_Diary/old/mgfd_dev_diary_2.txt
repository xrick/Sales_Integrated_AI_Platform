# MGFDÃ»qâ€¹|Ã¥ v2.0 - RAGÂ¢"Â¶Ã‹ÃÃ‹

**ÃºÃ‹Ã¥**: 2025-08-15
**Â+**: Claude Code
**Ã»qH,**: MGFD SalesRAG Integration System v2.1
**ÃÃ‹Ã®**: Ã®Â©"ÃÂ¨Â¦UÂOLÃºÃ‹mRAGÂ¢"Â¶Ã‹

---

## =Â¨ Ã'OL|Ã¾Â (2025-08-15)

### OLÃŒo

Â¢6Ã¥b"Ã‹kÃ‹9Ã®MÃ”ÂºxÃ‡â€FÃ»"
Ã»qÃÃ‰+**^lÃ¸"Ã**Â´ÃUÃmÃ™ÂG

### =4 OL1: lÃ¨Â¼"ÃxÃšUÂ (CRITICAL)

#### â‚¬SÂ

**Mn**: `libs/mgfd_cursor/action_executor.py:_get_popular_products()`

**UÂgÂ¹**:

```python
def _get_popular_products(self) -> List[Dict[str, Any]]:
    return [
        {
            "name": "ASUS ROG Strix G15",     # L ^lÃ¸"Ã
            "price": "NT$ 45,900",
        },
        {
            "name": "Lenovo ThinkPad X1 Carbon", # L ^lÃ¸"Ã  
            "price": "NT$ 52,900",
        },
        {
            "name": "MacBook Air M2",         # L ^lÃ¸"Ã
            "price": "NT$ 35,900",
        }
    ]
```

**9,Å¸Ã **:

- Ã»q(lÃ¨Â¼â€:â€¹xÃš
- Å’h*#Â¥lÃ¸gÃ¨"ÃÃ‡â„¢Â«
- UÃ"@	"ÃÃTÃ…Å’hâ€ ÃªlÃ¸gÃ¨Ã‡â„¢Â«"â€8ÃƒÅ¸G

#### Ã‡â„¢AÂ

```
(6Ã¥b â€™ DSL003yÅ Hâ€¹9M  
â€™ ActionType.RECOMMEND_POPULAR_PRODUCTS 
â€™ ActionExecutor._get_popular_products() L (lÃ¨Â¼xÃš)
â€™ Ã”Ã^lÃ¸"Ã L (mÃ™UÂ)
```

### =4 OL2: :RAGÂ¢"Ã¦\ (CRITICAL)

#### RAGÂ¶Ã‹:1Â

**vMÃ€Ã**:

-  **Think-Then-ActÂ¶Ã‹**: DialogueManager + ActionExecutor
-  **yÅ Hâ€¹Ã»q**: SpecialCasesKnowledgeBase
- L **RAGÂ¢"h**: !"ÃÂ¢"DÃ¶
- L **JVe**: !gÂ¹J_6
- L **Ã**: !Å¾Â©Ã½â€º
- L **"ÃNÃ¾**: !Ã½MÃºNÃ¾

#### Ã‡â„¢Â«Ã€Ã

- **â€H**: `data/raw/notebook_products.csv` (
  X()
- **Ã¦â€ºâ€H**: `data/raw/EM_New TTL_241104_AllTransformedToGoogleSheet/*.csv` (*#Â¥)
- **"ÃxÃ**: 19â€¹_â€H (819, 839, 958I)
- **Ã‡â„¢<**: Å’t"ÃÂ< (CPU, GPU, Â¶Ã”, Ã¹<I)

### =Ã  OL3: MÃ¯ÂªÂ°OL (HIGH)

#### ÂªÂ°!Â

```
(6xÃ‡x â€™ Ã»qÂ°funnel_question â€™ Ão:Ã¸x â€™ !Ã•2eï¿½e
```

**â‚¬SÅ¸Ã **:

- Session ID
  ï¿½Ã´Ã´Ã€KÃ·â€š
- RedisÃ€KÂ¡p8: `'str' object has no attribute 'decode'`
- MÃ¯Ã2Ã“Ã¸â€funnel_questionPÃ‹

---

## >Ã© Parent-Child ChunkingVe-

### 1. Â¶Ã‹â€šÃ°

ÃºÂ¼"ÃÃ‡â„¢â€y'Â¡(**Parent-Child Chunking**Ve

```
Parent Chunk ("Ã8ÃƒXÂ)
ï¿½ï¿½ Child 1: Performance Chunk (HÃ½Â<)
ï¿½ï¿½ Child 2: Design Chunk (-yÂµ)  
ï¿½ï¿½ Child 3: Connectivity Chunk (#Â¥')
ï¿½ï¿½ Child 4: Business Chunk (FÃ™yÂµ)
```

### 2. Parent Chunks-

#### "Ã8ÃƒXÂ

```python
class ProductParentChunk:
    def __init__(self, product: Dict):
        self.chunk_id = f"parent_{product['id']}"
        self.content = self._create_summary(product)
        self.metadata = {
            "modeltype": product["modeltype"],
            "modelname": product["modelname"],
            "price_tier": self._categorize_price(product),
            "primary_usage": self._infer_usage(product),
            "popularity_score": self._calculate_popularity(product),
            "key_features": self._extract_features(product)
        }
```

#### XÂVe

```python
def _create_summary(self, product: Dict) -> str:
    return f"""
    {product['modelname']} - {product['modeltype']}Ã»
  
    8Ãƒyr
    - Uh{product['cpu']}
    - o:a{product['gpu']}
    - Â¶Ã”{product['memory']}
    - ;Â({self._infer_primary_usage(product)}
    - iÃÂ¤{self._identify_target_users(product)}
    - Ã¹<Å¡M{self._get_price_positioning(product)}
    """
```

### 3. Child Chunks^

#### 3.1 Performance Chunk (HÃ½Â<)

```python
class PerformanceChunk:
    def create_content(self, product: Dict) -> str:
        return f"""
        HÃ½Mn{product['modelname']}
      
        8ÃƒUh{product['cpu']}
        - HÃ½I{self._categorize_cpu_tier(product['cpu'])}
        - i(4o{self._get_cpu_use_cases(product['cpu'])}
      
        o:'Ã½{product['gpu']}
        - bUÃ½â€º{self._assess_gpu_capability(product['gpu'])}
        - J2/Ã´Â¦{self._evaluate_gaming_support(product['gpu'])}
      
        Â¶Ã”Mn{product['memory']}
        - Ã¥U{self._assess_multitasking(product['memory'])}
      
        2XHÃ½{product['storage']}
        - 	eÂ¦{self._evaluate_storage_speed(product['storage'])}
      
        Å“HÃ½U{self._calculate_performance_score(product)}/10
        """
      
    metadata = {
        "focus": "performance",
        "cpu_tier": "high|medium|basic",
        "gpu_tier": "gaming|professional|integrated",
        "performance_score": 0.0-10.0,
        "target_workloads": ["gaming", "content_creation", "business"]
    }
```

#### 3.2 Design Chunk (-yÂµ)

```python
class DesignChunk:
    def create_content(self, product: Dict) -> str:
        return f"""
        -6'{product['modelname']}
      
        Â¢UÂ<{product['lcd']}
        - Â¢U:Ã¸{self._extract_screen_size(product['lcd'])}
        - o:ÃÃª{self._assess_display_quality(product['lcd'])}
        - w<yr{self._identify_eye_care_features(product['lcd'])}
      
        _Â«-
        - ÃÃI{self._categorize_weight(product)}
        - 6Â¿)'{self._assess_portability(product)}
        - Ã€Â¨<{self._identify_design_style(product)}
      
        Ã»`Å’*{product['battery']}
        - (Bâ€œ{self._estimate_battery_life(product['battery'])}
        - EÃ»yr{self._identify_charging_features(product['battery'])}
      
        #Â¥Ã Mn{product['iointerface']}
        - Ã´E'{self._assess_connectivity(product['iointerface'])}
      
        6'U{self._calculate_portability_score(product)}/10
        """
      
    metadata = {
        "focus": "design_portability",
        "screen_size_category": "13|14|15|16|17",
        "weight_category": "ultrabook|standard|gaming",
        "portability_score": 0.0-10.0,
        "target_scenarios": ["business_travel", "home_office", "gaming_setup"]
    }
```

#### 3.3 Connectivity Chunk (#Â¥')

```python
class ConnectivityChunk:
    def create_content(self, product: Dict) -> str:
        return f"""
        #Â¥Ã´E{product['modelname']}
      
        !Ãš#Â¥{product['wireless']}
        - Wi-Fiâ€“{self._extract_wifi_standard(product['wireless'])}
        - #Â¥iÅ¡'{self._assess_wifi_performance(product['wireless'])}
      
        ÃYÅ¸Ã½{product['bluetooth']}
        - ÃYH,{self._extract_bluetooth_version(product['bluetooth'])}
        - Ã¸Â¹'{self._assess_bluetooth_compatibility(product['bluetooth'])}
      
        	ÃšÂ²Ã¯{product['lan']}
        - Â²Ã¯Â¦{self._assess_lan_speed(product['lan'])}
      
        #Â¥Ã {product['iointerface']}
        - USBMn{self._analyze_usb_ports(product['iointerface'])}
        - o:8Ãº{self._identify_display_outputs(product['iointerface'])}
        - vÃ–Â¥Ã£{self._list_other_ports(product['iointerface'])}
      
        Ã´EÃ½â€ºU{self._calculate_connectivity_score(product)}/10
        """
      
    metadata = {
        "focus": "connectivity_expansion",
        "wifi_generation": "wifi6|wifi5|wifi4",
        "usb_types": ["usb_a", "usb_c", "thunderbolt"],
        "connectivity_score": 0.0-10.0,
        "target_needs": ["multi_monitor", "peripheral_heavy", "network_intensive"]
    }
```

#### 3.4 Business Chunk (FÃ™yÂµ)

```python
class BusinessChunk:
    def create_content(self, product: Dict) -> str:
        return f"""
        FÃ™m{product['modelname']}
      
        mÂI{product['certifications']}
        - mÂI{self._identify_enterprise_certs(product['certifications'])}
        - Ã‡â€°â€“{self._assess_security_standards(product['certifications'])}
      
        â€°hÅ¸Ã½
        - Â¨X{product['fingerprint']}
        - TPMâ€°h{product.get('tpm', 'N/A')}
        - Â Ã†/Ã´{self._assess_encryption_support(product)}
      
        FÃ™yr
        - â€“
p{self._assess_meeting_capability(product)}
        - â€¡Ã¸U{self._evaluate_office_performance(product)}
        - Ã¥Hâ€¡{self._assess_productivity(product)}
      
        Â­w/Ã´
        - ÃÃº
Ã™{self._identify_warranty_features(product)}
        - m/Ã´{self._assess_enterprise_support(product)}
      
        FÃ™i(Â¦{self._calculate_business_score(product)}/10
        """
      
    metadata = {
        "focus": "business_professional",
        "security_level": "enterprise|standard|basic",
        "meeting_capability": "excellent|good|basic",
        "business_score": 0.0-10.0,
        "target_users": ["enterprise", "soho", "remote_worker"]
    }
```

### 4. Â¢"A-

#### 4.1 Ã™Å½ÂµÂ¢"Ve

```python
class HybridProductRetriever:
    def retrieve(self, query: str, user_slots: Dict, top_k: int = 5) -> List[Dict]:
        # Å½Âµ1: Å¾Â©Â¢" ((child chunks-)
        semantic_matches = self._semantic_retrieval(query, top_k * 4)
      
        # Å½Âµ2: Ã½MNÃ¾ ((parent metadata)
        filtered_matches = self._slot_based_filtering(semantic_matches, user_slots)
      
        # Å½Âµ3: ParentZ (	"Ãuchild chunks)
        aggregated_products = self._aggregate_by_parent(filtered_matches)
      
        # Å½Âµ4: Å“â€™Â (Å¾Â©Ã¸<Â¦ + Ã½M9M + Â±â‚¬Â¦)
        final_ranking = self._comprehensive_ranking(aggregated_products, query, user_slots)
      
        return final_ranking[:top_k]
```

#### 4.2 Å¾Â©Â¢"Ã¦\

```python
def _semantic_retrieval(self, query: str, top_k: int) -> List[Dict]:
    """(child chunks-2LÅ¾Â©"""
    query_embedding = self.sentence_transformer.encode(query)
  
    similarities = []
    for chunk in self.child_chunks:
        similarity = float(cosine_similarity(
            query_embedding.reshape(1, -1),
            chunk['embedding'].reshape(1, -1)
        )[0][0])
      
        similarities.append({
            "chunk": chunk,
            "parent_id": chunk["parent_id"],
            "chunk_type": chunk["metadata"]["focus"],
            "similarity": similarity
        })
  
    return sorted(similarities, key=lambda x: x['similarity'], reverse=True)[:top_k]
```

#### 4.3 Ã½MNÃ¾_6

```python
def _slot_based_filtering(self, semantic_matches: List[Dict], user_slots: Dict) -> List[Dict]:
    """ÃºÂ¼(6Ã½MNÃ¾"Ã"""
    filtered = []
  
    for match in semantic_matches:
        parent_metadata = self.parent_chunks[match["parent_id"]]["metadata"]
      
        # â€”NÃ¾
        if "budget_range" in user_slots:
            if not self._match_budget(parent_metadata["price_tier"], user_slots["budget_range"]):
                continue
      
        # (NÃ¾
        if "usage_purpose" in user_slots:
            if not self._match_usage(parent_metadata["primary_usage"], user_slots["usage_purpose"]):
                continue
      
        # ÃLNÃ¾
        if "brand_preference" in user_slots:
            if not self._match_brand(parent_metadata["modelname"], user_slots["brand_preference"]):
                continue
      
        # HÃ½ï¿½BNÃ¾
        if "performance_priority" in user_slots:
            if not self._match_performance_need(match["chunk"], user_slots["performance_priority"]):
                continue
      
        filtered.append(match)
  
    return filtered
```

#### 4.4 Ã¸Ãœ'Uâ€”Ã•

```python
def _comprehensive_ranking(self, products: List[Dict], query: str, user_slots: Dict) -> List[Dict]:
    """Å“Uâ€™Â"""
    for product in products:
        # Å¾Â©Ã¸<Â¦x (40%)
        semantic_score = product["max_similarity"]
      
        # Ã½M9Mx (35%)
        slot_match_score = self._calculate_slot_match_score(product, user_slots)
      
        # Â±â‚¬Â¦x (15%)
        popularity_score = product["parent_metadata"]["popularity_score"]
      
        # Å’t'x (10%) - "ÃÃ‡
Å’tÂ¦
        completeness_score = self._assess_data_completeness(product)
      
        # Å“U
        product["final_score"] = (
            semantic_score * 0.4 +
            slot_match_score * 0.35 +
            popularity_score * 0.15 +
            completeness_score * 0.1
        )
  
    return sorted(products, key=lambda x: x["final_score"], reverse=True)
```

---

## =

 Ã·Â¢"Ã»qÂ¶Ã‹

### 1. Ã¥b^â€¹iÃ‰Â¢"

#### Â±â‚¬"ÃÃ¥bU

```python
def handle_popular_request(self, query: str) -> List[Dict]:
    """UÂ±â‚¬"ÃÃ¥b"""
    # ;ÂÂ¢"strategy: Â±â‚¬Â¦*H
    products = self.retrieve_with_strategy(
        query=query,
        strategy="popularity_focused",
        weights={
            "popularity_score": 0.5,
            "semantic_similarity": 0.3,
            "user_rating": 0.2
        }
    )
  
    # ÂºÃÃ”Ãâ€Ã½/lÃ¸"Ã
    verified_products = self._verify_company_products(products)
  
    return verified_products
```

#### HÃ½Ã¥bU

```python
def handle_performance_request(self, query: str, user_slots: Dict) -> List[Dict]:
    """UHÃ½Ã¥b"""
    # ;ÂÂ¢"performance chunks
    return self.retrieve_with_strategy(
        query=query,
        strategy="performance_focused",
        chunk_weights={
            "performance": 0.6,
            "design": 0.2,
            "connectivity": 0.1,
            "business": 0.1
        },
        user_slots=user_slots
    )
```

### 2. Ã¦BÂ¢"*

#### Ã©XVe

```python
class CachedProductRetriever:
    def __init__(self):
        self.query_cache = LRUCache(maxsize=1000)
        self.embedding_cache = {}
      
    def retrieve_with_cache(self, query: str, user_slots: Dict) -> List[Dict]:
        cache_key = self._generate_cache_key(query, user_slots)
      
        if cache_key in self.query_cache:
            return self.query_cache[cache_key]
      
        results = self.retrieve(query, user_slots)
        self.query_cache[cache_key] = results
        return results
```

---

## <Â¯ Ã¦\k

### Å½Âµ1: ÃŠ%Ã®Â© (Critical - 3B)

#### 1.1 Ã®Â©lÃ¨Â¼"ÃxÃš

- **â€H**: `libs/mgfd_cursor/action_executor.py`
- **Ã»Ã™**: Ã»d `_get_popular_products()`-â€lÃ¨Â¼xÃš
- **Ã¦\**: #Â¥0 `NotebookKnowledgeBase`rÃ–Ã¦"Ã

```python
def _get_popular_products(self) -> List[Dict[str, Any]]:
    """rÃ–Â±â‚¬"Ãh - Ã®Â©H"""
    try:
        # Å¾Ã¥XÂ«rÃ–Ã¦"Ã
        kb = NotebookKnowledgeBase()
        all_products = kb.get_all_products()
      
        # 	Â±â‚¬Â¦â€™Â (ÃºÂ¼Ã¦xÃš)
        popular_products = sorted(
            all_products, 
            key=lambda x: x.get('popularity_score', 0), 
            reverse=True
        )[:5]
      
        return popular_products
    except Exception as e:
        self.logger.error(f"rÃ–Â±â‚¬"Ã1W: {e}")
        return []  # Ã”Ãzh^lÃ¨Â¼xÃš
```

#### 1.2 Ã®Â©"ÃÃ¥XÂ«

- **â€H**: `libs/mgfd_cursor/knowledge_base.py`
- **Ã»Ã™**: Ã®cCSVâ€HÃ¯â€˜	eÃ¦"ÃxÃš

```python
def _get_default_csv_path(self) -> str:
    """Ã®cCSVÃ¯â€˜Ã¦"Ãâ€H"""
    base_path = Path(__file__).parent.parent.parent
    data_dir = base_path / "data" / "raw" / "EM_New TTL_241104_AllTransformedToGoogleSheet"
  
    # 	e@	â€¹_â€H
    csv_files = list(data_dir.glob("*_result.csv"))
    return csv_files  # Ã”Ãâ€Hh^Â®ï¿½â€H
```

### Å½Âµ2: RAGÃ»qÃºÃ‹ (High - 5B)

#### 2.1 ÃºÃ‹Parent-Child ChunkingÃ»q

- **Â°â€H**: `libs/mgfd_cursor/chunking_engine.py`

```python
class ProductChunkingEngine:
    def __init__(self):
        self.sentence_transformer = SentenceTransformer(
            'sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2'
        )
      
    def create_product_chunks(self, product: Dict) -> Tuple[Dict, List[Dict]]:
        """ÂºÂ®ï¿½"ÃuÃºparentÅ’child chunks"""
        parent = self._create_parent_chunk(product)
        children = [
            self._create_performance_chunk(product),
            self._create_design_chunk(product),
            self._create_connectivity_chunk(product),
            self._create_business_chunk(product)
        ]
      
        # embeddings
        parent['embedding'] = self.sentence_transformer.encode(parent['content'])
        for child in children:
            child['embedding'] = self.sentence_transformer.encode(child['content'])
      
        return parent, children
```

#### 2.2 ÃºÃ‹Ã·Â¢"Ã»q

- **Â°â€H**: `libs/mgfd_cursor/hybrid_retriever.py`

```python
class HybridProductRetriever:
    def __init__(self, chunking_engine: ProductChunkingEngine):
        self.chunking_engine = chunking_engine
        self.parent_chunks = {}
        self.child_chunks = []
        self.load_all_chunks()
      
    def retrieve_popular_products(self, criteria: Dict = None) -> List[Dict]:
        """Â¢"Â±â‚¬"Ã"""
        # 	Â±â‚¬Â¦â€™Â@	parent chunks
        popular_parents = sorted(
            self.parent_chunks.values(),
            key=lambda x: x['metadata']['popularity_score'],
            reverse=True
        )
      
        return self._format_retrieval_results(popular_parents[:5])
```

#### 2.3 tActionExecutor

- **Ã®9â€H**: `libs/mgfd_cursor/action_executor.py`

```python
class ActionExecutor:
    def __init__(self, llm_manager, config_loader):
        self.llm_manager = llm_manager
        self.config_loader = config_loader
      
        # Ã‹Â¢"Ã»q
        self.chunking_engine = ProductChunkingEngine()
        self.retriever = HybridProductRetriever(self.chunking_engine)
      
    def _handle_recommend_popular_products(self, command: Dict[str, Any], state: Dict[str, Any]) -> Dict[str, Any]:
        """UÂ±â‚¬"ÃÂ¨Â¦ - (RAGÂ¢""""
        try:
            # (Â¢"Ã»qrÃ–Â±â‚¬"Ã
            popular_products = self.retriever.retrieve_popular_products()
          
            # Â¨Â¦ÃÃ‰
            response = self._generate_rag_based_response(popular_products)
          
            return {
                "action_type": "popular_recommendation",
                "content": response,
                "recommendations": popular_products,
                "confidence": 0.95,
                "data_source": "company_database"  # xÃšâ€ Â
            }
        except Exception as e:
            self.logger.error(f"RAGÂ¢"1W: {e}")
            return self._handle_error_gracefully()
```

### Å½Âµ3: Â¢"* (Medium - 3B)

#### 3.1 Ã¦\Å¾Â©

- **Â°â€H**: `libs/mgfd_cursor/semantic_search.py`

#### 3.2 Ã¦\Ã½MNÃ¾

- **Â°â€H**: `libs/mgfd_cursor/slot_filter.py`

#### 3.3 Ã¦\Ã¸Ãœ'U

- **Â°â€H**: `libs/mgfd_cursor/relevance_scorer.py`

### Å½Âµ4: MÃ¯Ã®Â© (Medium - 2B)

#### 4.1 Ã®Â©SessionÃ€KÂ¡

- **â€H**: `libs/mgfd_cursor/redis_state_manager.py`

#### 4.2 Ã®Â©ÂªÂ°OL

- **â€H**: `templates/mgfd_interface.html`

---

## =ÃŠ â‚¬SÂ<

### 8ÃƒDÃ¶Â¶Ã‹

```
MGFD RAGÃ»q
ï¿½ï¿½ ChunkingEngine (JÃ)
   ï¿½ï¿½ ProductParentChunk
   ï¿½ï¿½ PerformanceChunk  
   ï¿½ï¿½ DesignChunk
   ï¿½ï¿½ ConnectivityChunk
   ï¿½ï¿½ BusinessChunk
ï¿½ï¿½ HybridRetriever (Ã·Â¢"h)
   ï¿½ï¿½ SemanticSearch
   ï¿½ï¿½ SlotFilter
   ï¿½ï¿½ RelevanceScorer
ï¿½ï¿½ KnowledgeBase (Ã¥XÂ«)
   ï¿½ï¿½ ProductLoader
   ï¿½ï¿½ DataValidator
   ï¿½ï¿½ IndexManager
ï¿½ï¿½ ResponseGenerator (ÃÃ‰h)
    ï¿½ï¿½ TemplateEngine
    ï¿½ï¿½ ContentFormatter
    ï¿½ï¿½ MetadataEnricher
```

### Ã‡â„¢Â«tÂ¹H

#### "ÃÃ‡â„¢	e

```python
class MultiFileProductLoader:
    def load_all_products(self) -> List[Dict]:
        """	e@	â€¹_â€"ÃxÃš"""
        products = []
        data_dir = self._get_data_directory()
      
        for csv_file in data_dir.glob("*_result.csv"):
            model_products = self._load_single_model(csv_file)
            products.extend(model_products)
      
        return self._validate_and_enrich(products)
  
    def _validate_and_enrich(self, products: List[Dict]) -> List[Dict]:
        """WIÅ’PÃŒ"ÃxÃš"""
        enriched = []
        for product in products:
            # Ã‡â„¢WI
            if self._validate_product(product):
                # xÃšPÃŒ
                product['popularity_score'] = self._calculate_popularity(product)
                product['price_tier'] = self._categorize_price(product)
                product['target_users'] = self._identify_target_users(product)
                enriched.append(product)
      
        return enriched
```

### APIÃ‹b-

#### Â°Å¾Â¢"Ã¯Ã

```python
# api/mgfd_routes.py
@router.post("/search")
async def search_products(request: ProductSearchRequest):
    """"ÃAPI"""
    try:
        retriever = HybridProductRetriever()
        results = retriever.retrieve(
            query=request.query,
            user_slots=request.slots,
            top_k=request.limit
        )
      
        return ProductSearchResponse(
            success=True,
            products=results,
            total_count=len(results),
            data_source="company_database"
        )
    except Exception as e:
        return ProductSearchResponse(
            success=False,
            error=str(e),
            products=[]
        )
```

### ,fVe

#### Â®C,f

```python
class TestProductRetriever(unittest.TestCase):
    def test_popular_products_are_company_products(self):
        """ÂºÃÂ±â‚¬"ÃÂ¨Â¦Ãª+lÃ¸"Ã"""
        retriever = HybridProductRetriever()
        results = retriever.retrieve_popular_products()
      
        for product in results:
            # WI"Ãâ€ Â
            self.assertIn('modeltype', product)
            self.assertIn('modelname', product)
            # ÂºÃ
/lÃ¨Â¼â€^lÃ¸"Ã
            self.assertNotIn('ASUS ROG Strix', product['modelname'])
            self.assertNotIn('MacBook Air', product['modelname'])
  
    def test_retrieval_accuracy(self):
        """,fÂ¢"â€“Âº'"""
        retriever = HybridProductRetriever()
      
        # ,fHÃ½Ã¥b
        results = retriever.retrieve("Ã˜HÃ½J2FÃ»", {"usage_purpose": "gaming"})
        for product in results:
            self.assertGreater(product['performance_score'], 7.0)
```

---

## =Ã  Ã¦\W

### â€HÃ®9Â®

#### Ã‹sÃ®9 (Critical)

1. `libs/mgfd_cursor/action_executor.py` - Ã»dlÃ¨Â¼"Ã
2. `libs/mgfd_cursor/knowledge_base.py` - Ã®c"Ã	eÃ¯â€˜

#### Â°Å¾â€H (High)

1. `libs/mgfd_cursor/chunking_engine.py` - Parent-ChildJÃ»q
2. `libs/mgfd_cursor/hybrid_retriever.py` - Ã·Â¢"Ã»q
3. `libs/mgfd_cursor/semantic_search.py` - Å¾Â©Ã
4. `libs/mgfd_cursor/slot_filter.py` - Ã½MNÃ¾Ã»q
5. `libs/mgfd_cursor/relevance_scorer.py` - Ã¸Ãœ'UÃ»q

#### Mnâ€H (Medium)

1. `libs/mgfd_cursor/humandata/retrieval_config.json` - Â¢"Mn
2. `libs/mgfd_cursor/humandata/chunking_rules.json` - JÂG

### Â¼Ã„â€¹

#### Å’tÂ¢"A

```python
# (Ã„â€¹
retriever = HybridProductRetriever()

# Â±â‚¬"ÃÃ¥b
popular_products = retriever.retrieve_popular_products()

# ÃºÂ¼Ã½Mâ€Ã¥b
gaming_laptops = retriever.retrieve(
    query="Ã˜HÃ½J2FÃ»",
    user_slots={
        "usage_purpose": "gaming",
        "budget_range": "high",
        "performance_priority": ["gpu", "cpu"]
    }
)

# Å¾Â©
similar_products = retriever.semantic_search(
    "â€FÃ™FÃ»Â¨Â¦"
)
```

### MnÃƒx

#### Â¢"Mn

```json
{
  "retrieval_config": {
    "top_k_semantic": 20,
    "top_k_final": 5,
    "similarity_threshold": 0.7,
    "chunk_weights": {
      "performance": 0.3,
      "design": 0.25, 
      "connectivity": 0.2,
      "business": 0.25
    },
    "ranking_weights": {
      "semantic_similarity": 0.4,
      "slot_match": 0.35,
      "popularity": 0.15,
      "completeness": 0.1
    }
  }
}
```

### Ã¨rÂ¢Ã¥Â®

#### xÃšWI

- [ ] ÂºÂ@	"Ãâ€HÃ²	e
- [ ] WI"ÃxÃšÅ’t'
- [ ] Â¢Ã¥embeddingc8
- [ ] ,fÂ¢"PÅ“â€“Âº'

#### Å¸Ã½WI

- [ ] Â±â‚¬"ÃÃ¥bÃ”ÃlÃ¸"Ã
- [ ] Ã½MNÃ¾Å¸Ã½c8
- [ ] Å¾Â©9Mâ€“Âº
- [ ] Ã¸Ãœ'â€™Â

#### 'Ã½WI

- [ ] Â¢"Ã¿Ã‰Bâ€œ < 500ms
- [ ] Â¶Ã”(Ã
- [ ] &|UÃ½â€ºEÂ³
- [ ] Ã©X_6	H

---

## <â€“ Å“

### Ã‹sÃ£zOL

1. **Ë†d"ÃUÂ**: 100%(lÃ¸"ÃxÃš
2. **ÃºÃ‹RAGÂ¶Ã‹**: Å’tâ€Â¢"Å’Â¨Â¦Ã»q
3. **Ã®Â©ÂªÂ°OL**: AÂ¢â€
   qÃ”W

### â‚¬SÃG

1. **mRAG**: Parent-Child chunking + Ã·Â¢"
2. **zÃ½Â¨Â¦**: ÃºÂ¼Å¾Â©Ã£â€"Ã9M
3. **Ã¯Ã´UÂ¶Ã‹**: /Ã´*â€ Å¸Ã½Ã´U

### mÃ™Ã¹<

1. **Â'**: Â´<uË†mÃ™ÂG
2. **â€“Âº'**: Â¾â€“â€"ÃÂ¨Â¦
3. **(6Ã”W**: zÃ½â€
   q

---

**=Ã… Ã´Â°Bâ€œ**: 2025-08-15
**Ã€K**: kÅ’â€¦Ã¦\Ã·L
**0Å’Bâ€œ**: 13B (Critical: 3h, High: 5h, Medium: 5h)
**Å¸â€“**: Ã»qÃªÂ¨Â¦lÃ¸"ÃRAGÂ¢"â€“Âºâ€¡ > 90%
